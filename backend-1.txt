npm init
create files importants
add nodemon from resart the server every time saved 
npm i -D nodemon

in package .json 

"scripts": {
    "dev": "nodemon src/index.js"
  },


  "name": "backend-project",
  "version": "1.0.0",
  "description": "this is first backend project",
  "types": "module",
  "keywords": [
    "Backend",
    "project"
  ],	


create this folder inside src 
mkdir controllers, db, middlewares, models, routes, utils



npm i prettier // for good format

.pretierrc

{
    "singleQuote": false,
    "bracketSpacing": true,
"tabWidth": 2,
"trailingComma": "es5",
"semi": true
}

.prettierignore

/.vscode
/node_module
./dist

*.env
.env
.env*

 
SETUP DB

setup0 in mongoosdb atlast 

add env 
PORT=8000
MONGODB_URL=mongodb+srv://trailforfewdays07_db_user:bhuvan365@cluster0.n3zowe4.mongodb.net

inside constant js 
export const DB_NAME =' learningApp'


npm i mongoose
npm i express
npm i dotenv


APPORACH 1:
index.js

import mongoose from 'mongoose';
import { DB_NAME } from './constant';

import express from 'express';
const app = express();

; (async () => {
    try {
        await mongoose.connect(`${process.env.MONGO_URI}/${DB_NAME}`)
        app.on('error',(error)=>{
            console.error('Failed to connect to the database');
            throw error;
        })

app.listen(process.env.PORT,()=>{
    console.log(`running app on port ${process.env.PORT}`);
})

    } catch (err) {
        console.error('Database connection error:', err);
        throw err;
    }
})()

APPORACH 2 :
src/db/index.js

import mongoose from "mongoose";
import { DB_NAME } from "../constant.js";

const connectDB = async () => {
    try{

const connection =  await mongoose.connect(`${process.env.MONGODB_URL}/${DB_NAME}`);
console.log(`Database connected successfully ${connection.connection.host}`);

    }catch (err){
        console.error('Database connection error:', err);
        // throw err;
        process.exit(1);
    }
}

export default connectDB;

=>index.js

// require('dotenv').config({path:'./env'});
import dotenv from  'dotenv';
import connectDB from './db/index.js';
dotenv.config({path:'./env'});

connectDB();

/package.json

  "scripts": {
    "dev": "nodemon -r dotenv/config--experimental-json-modules  src/index.js"
  },


  =>final package.json
  {
  "name": "backend-project",
  "version": "1.0.0",
  "description": "this is first backend project",
  "keywords": [
    "Backend",
    "project"
  ],
  "homepage": "https://github.com/bhuvan-365/Backend-project#readme",
  "bugs": {
    "url": "https://github.com/bhuvan-365/Backend-project/issues"
  },
  "repository": {
    "type": "git",
    "url": "git+https://github.com/bhuvan-365/Backend-project.git"
  },
  "license": "ISC",
  "author": "Bhuvan bhattrai",
  "type": "module",
  "main": "index.js",
  "scripts": {
    "dev": "nodemon -r dotenv/config --experimental-json-modules  src/index.js"
  },
  "devDependencies": {
    "nodemon": "^3.1.11",
    "prettier": "^3.7.4"
  },
  "dependencies": {
    "dotenv": "^17.2.3",
    "express": "^5.2.1",
    "mongoose": "^9.0.2"
  }
}



=> Other SETUP
npm install cookie parser
npm install cors

=> SET middle ware
utils/

apiError 
apiResponse
asyncHandler

=> Create Models Accordingly

=> install v2 // This is used to add pagination (page & limit) when you use MongoDB aggregation in Mongoose.
npm install mongoose-paginate-v2


=>import like this  in model
import mongooseAggregatePaginate from "mongoose-aggregate-paginate-v2";

videoSchema.plugin(mongooseAggregatePaginate);
before export  

=> instal bcrypt 
A library to help you hash passwords.

npm install bcrypt

=> install jsonwebtoken (JWT)
  npm install jsonwebtoken


ADD like this in model

import jwt from "jsonwebtoken";
import bcrypt from "bcrypt";


SET UP Cloudnary for image / video
npm i cloudinary



Also install
npm install multer (used)
Or
npm i express-fileupload


fs File system 


Use Disk Storage (used) or memory storage 


->step to create user
get user data from req body (frontend)
validation {format, required fields, unique email etc.} - not empty fields
check if user already exists : username , email
check for images 
check for avatar
upload image to cloudinary , avatar
create user object - creation call  -entry in db
remove password and refresh token from response
check for errors 
return response

// user.controllers
import {asyncHandler} from '../utils/asyncHandler.js';

export const registerUser = asyncHandler(async (req, res) => {
// return res.status(200).json({
//     message:"ok its working"
// })

//get user data from req body (frontend)
//validation {format, required fields, unique email etc.} - not empty fields
// check if user already exists : username , email
// check for images 
// check for avatar
// upload image to cloudinary , avatar
// create user object - creation call  -entry in db
// remove password and refresh token from response
//check for errors 
// return response
})

